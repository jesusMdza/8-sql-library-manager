extends layout

block title
  title #{headTitle}

block content
  div.heading
    h1 #{title}
    div.link-container
      div.multi-link-container
        a(href='/books/search') Search Book
        a(href='/books/new' style="margin-left: 40px") Add Book
  if query.title || query.author || query.genre || query.year
    div.filter-container
      each value, index in query
        if value !== ''
          form(method='post' action=`/books/clear/${index}`)
            div.filter-box
              div.close
                label.filter
                  input.filter(type='submit')
                  svg#svg2(height='15', version='1.1', width='15', xmlns='http://www.w3.org/2000/svg', xmlns:cc='http://creativecommons.org/ns#', xmlns:dc='http://purl.org/dc/elements/1.1/', xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape', xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#', xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd', xmlns:svg='http://www.w3.org/2000/svg')
                    defs#defs4
                    g#layer1(transform='translate(0,-1036.3622)')
                      path#path2985(d='m 2,1050.3622 12,-12', style='fill:none;stroke:#F9444A;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none')
                      path#path2985-1(d='m 2,1038.3622 12,12', style='fill:none;stroke:#F9444A;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none')
              span #{index.charAt(0).toUpperCase() + index.slice(1)} = "#{value}"
  table
    thead
      tr.name-row
        th Title
        th Author
        th Genre
        th Year
    tbody
    if books.length > 0
      each book in books
        tr
          td
            a.book-name(href=`/books/${book.id}/update`) #{book.title}
          td #{book.author}
          td #{book.genre}
          td #{book.year}
    else 
      tr
        td No Matches Found
  ul.page-container
    each pageNumber in pagesArray
      a(href=`/books/page=${pageNumber}`)
        if pageParam === pageNumber
          li.page.active #{pageNumber}
        else 
          li.page #{pageNumber}